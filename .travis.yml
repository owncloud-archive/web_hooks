language: php
php:
  - 5.3
  - 5.4
  - 5.5

env:
  - DB=sqlite
  - DB=mysql
  - DB=pgsql

before_install:
  - mysql -e 'create database oc_autotest;'
  - mysql -u root -e "CREATE USER 'oc_autotest'@'localhost' IDENTIFIED BY 'owncloud'";
  - mysql -u root -e "grant all on oc_autotest.* to 'oc_autotest'@'localhost'";
  - createuser -U travis -s oc_autotest
  - tests/before_install.sh
  - cp tests/core_install.sh ../core/

install:
  - cd ../core; ./core_install.sh $DB

script:
  - cd ../core/apps/web_hooks/tests; phpunit --configuration phpunit.xml
  - wget https://scrutinizer-ci.com/ocular.phar
  - php ocular.phar code-coverage:upload --format=php-clover clover.xml

 
